{% extends 'base.html' %}

{% block post_footer %}
<script type="text/javascript">
  function abrir(pagina) {
    var strWindowFeatures = "menubar=no,resizable=no,scrollbars=yes,status=no,width=600,height=400";
    window.open(pagina, 'window', strWindowFeatures).focus();
  }
</script>
{% endblock post_footer %}

{% block pre_contenido %}
  <div class="row">
    <div class="col-md-12">
      <div class="jumbotron">
        <h1>
          <i class="icon icon-material-bug-report"></i> 
          {{ plan.nombre }} <small><span class="label label-primary">{{ plan.get_tipo_display }}</span></small>
        </h1>
        {{ plan.redaccion|safe }}
      </div>
    </div>
  </div>
{% endblock pre_contenido %}

{% block contenido %}

<div class="row" id="identificacion">
  <div class="col-md-12">
    <div class="panel panel-primary">
      <div class="panel-heading">
        <h3 class="panel-title"><i class="fa fa-info-circle"></i> Identificación</h3>
      </div>
      <div class="panel-body">
        <table class="table">
          <tr>
            <td>Nombre: <strong>{{ plan.nombre }}</strong></td>
            <td>Detectado en: <strong>{{ plan.get_deteccion_display }}</strong></td>
            <td>Tipo: <strong>{{ plan.get_tipo_display }}</strong></td>
            <td>Mejora de: <strong>{{ plan.get_mejora_display }}</strong></td>
          </tr>
          <tr>
            <td>Folio: <strong>{{ plan.id }}</strong></td>
            <td>Proceso: <strong>{{ plan.get_proceso_display }}</strong></td>
            <td>Fecha de Llenado: <strong>{{ plan.fecha_llenado }}</strong></td>
            <td>Fecha de Detección: <strong>{{ plan.fecha_deteccion }}</strong></td>
          </tr>
        </table>
      </div>
    </div>
  </div>
</div>
<div class="row" id="decl">
  <div class="col-md-12">
    <div class="panel panel-info">
      <div class="panel-heading">
        <h3 class="panel-title"><i class="fa fa-legal"></i> Declaración</h3>
      </div>
      <div class="panel-body">
        <div class="row">
          <div class="col-md-6">
            <div class="thumbnail">
              <div class="caption">
                <h3>Redacción</h3>
                {{ plan.redaccion|safe }}
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="thumbnail">
              <div class="caption">
                <h3>Declaración</h3>
                {{ plan.declaracion|safe }}
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-4 well" style="height: 200px; overflow-y: scroll;">
            <h4>Evidencias</h4>
            {{ plan.evidencia|safe }}
          </div>
          <div class="col-md-4 well style="height: 200px; overflow-y: scroll;"">
            <h4>Requisitos al que hace referencia</h4>
            {{ plan.requisitos|safe }}
          </div>
          <div class="col-md-4 well style="height: 200px; overflow-y: scroll;"">
            <h4>No conformidades o NCP relacionadas</h4>
            {{ plan.relacionadas|safe }}
          </div>
        </div>
      </div>
    </div>
  </div>
</div><!-- ./declaracion -->
<div class="row" id="corr">
  <div class="col-md-12">
    <div class="panel panel-danger">
      <div class="panel-heading">
        <h3 class="panel-title"><i class="fa fa-fire-extinguisher"></i> Corrección</h3>
      </div>
      <div class="panel-body">
        {{ plan.correccion|safe }}
      </div>
      <div class="panel-footer">
        <table class="table table-condensed">
          <tr>
            <td>Responsable: <strong>{{ plan.reaccion_responsable }}</strong></td>
            <td>{% if plan.reaccion_evidencia %}<a target="_blank" href="{{ plan.reaccion_evidencia.url }}" onClick="abrir(this.href);return false" class="btn btn-primary">Evidencia</a>{% endif %}</td>
            <td>Consecuencias: <strong>{{ plan.consecuencias }}</strong>
          </tr>
        </table>
      </div>
    </div>
  </div>
</div><!-- ./correccion -->

{% endblock contenido %}